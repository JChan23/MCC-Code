array = []

file = open("text.txt", "r") #requires external file
with open('text.txt') as f:
    temparray = f.read().splitlines()
for i in range(len(temparray)):
    e = temparray[i].split(" ")
    array.append([eval(i) for i in e])


k = 60
n = len(array)
dp = [[float('inf')] * (k + 1) for i in range(n + 1)]
dp[0][0] = 0
for i in range(1, n + 1):
    for a in range(1, k + 1):
        for j in range(i):
            max_height = max(array[j][0] for j in range(j, i))
            total_area = max_height * sum(array[j][1] for j in range(j, i))
            dp[i][a] = min(dp[i][a], dp[j][a - 1] + total_area)

print(dp[n][k])

#External file example:
"""
312 240
790 452
868 217
913 766
598 406
867 107
39 154
859 559
341 918
335 725
689 87
142 779
811 434
415 868
421 297
664 622
482 77
777 326
778 268
164 348
282 331
894 551
110 83
38 138
159 341
649 240
108 386
407 174
867 998
917 681
627 332
530 17
848 456
358 543
308 763
891 867
670 4
676 895
923 219
664 767
816 786
258 941
226 196
654 528
378 892
617 696
321 618
717 208
92 32
7 468
448 516
110 709
983 186
616 901
587 868
395 567
598 883
617 202
872 87
942 568
882 856
142 461
140 445
952 444
586 489
665 613
231 454
630 895
648 847
488 4
871 128
402 49
275 760
837 49
988 518
816 909
124 366
271 882
394 319
182 979
121 262
712 884
295 131
799 677
827 169
654 6
542 139
920 333
875 542
203 530
868 663
619 327
830 151
787 270
199 738
312 36
780 507
425 465
134 267
591 403
851 606
162 158
513 557
364 36
601 184
170 942
500 306
96 727
776 869
250 222
221 971
879 861
872 997
156 740
685 266
529 298
757 159
965 908
209 245
15 562
544 582
68 689
987 992
25 227
251 52
623 449
142 873
707 339
985 695
436 40
855 288
559 130
736 955
400 573
67 467
578 231
534 910
425 550
955 405
683 709
807 255
708 608
693 509
389 29
27 696
7 406
366 646
743 233
412 673
693 474
855 681
12 91
623 372
449 573
107 39
"""
